{{- if eq .chezmoi.hostname "cachyos-inf" -}}
#!/usr/bin/env bash

NAME="$(basename "$0")"
ICON="/usr/share/icons/Papirus-Dark/16x16/devices/keyboard.svg"
KEYBOARD="$(hyprctl -j devices | jq -r '.keyboards[] | select(.main == true) | .name')"

hyprctl switchxkblayout "$KEYBOARD" next

ACTIVE_KEYMAP="$(hyprctl -j devices | jq -r ".keyboards[] | select(.name == \"$KEYBOARD\") | .active_keymap")"

notify-send --app-name="Hyprland" --icon="$ICON" "Keyboard changed" "$ACTIVE_KEYMAP"
{{ end -}}
